<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Add Delivery</title>
</head>
<body>
  <h1>Add Delivery</h1>

  <form id="deliveryForm" onsubmit="submitDelivery(); return false;">
    <label>Date: <input type="date" id="date" required /></label><br /><br />
    <label>Customer ID: <input type="number" id="customer_id" required /></label><br />
    <label>Customer Name: <input type="text" id="customer_name" /></label><br />
    <label>Vendor ID: <input type="number" id="vendor_id" required /></label><br />
    <label>Vendor Name: <input type="text" id="vendor_name" /></label><br />
    <label>Product ID: <input type="number" id="product_id" required /></label><br />
    <label>Product Name: <input type="text" id="product_name" /></label><br />
    <label>Length (ft): <input type="number" id="length_ft" required /></label><br />
    <label>Width (ft): <input type="number" id="width_ft" required /></label><br />
    <label>Slip Number: <input type="text" id="slip_number" /></label><br />
    <label>Vehicle Number: <input type="text" id="vehicle_number" /></label><br />
    <label>Notes: <input type="text" id="notes" /></label><br /><br />

    <button type="submit">Add Delivery</button>
  </form>

  <script>
    async function submitDelivery() {
      const deliveryData = {
        date: document.getElementById('date').value,
        customer_id: document.getElementById('customer_id').value,
        vendor_id: document.getElementById('vendor_id').value,
        product_id: document.getElementById('product_id').value,
        length_ft: document.getElementById('length_ft').value,
        width_ft: document.getElementById('width_ft').value,
        slip_number: document.getElementById('slip_number').value,
        notes: document.getElementById('notes').value,
        product_name: document.getElementById('product_name').value,
        customer_name: document.getElementById('customer_name').value,
        vehicle_number: document.getElementById('vehicle_number').value,
        vendor_name: document.getElementById('vendor_name').value
      };

      try {
        const response = await fetch('https://jss-pied.vercel.app/api/deliveries/add', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(deliveryData)
        });

        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }

        const data = await response.json();
        alert(`✅ Delivery Saved: ${data.message || 'Success'}`);
        console.log(data);
      } catch (error) {
        console.error('Error saving delivery:', error);
        alert('❌ Error saving delivery: ' + error.message);
      }
    }
  </script>
</body>
</html>
